(self.webpackChunkScienceHub=self.webpackChunkScienceHub||[]).push([[919],{6553:function(q,V){var c,r=function(){this._tweens={},this._tweensAddedDuringUpdate={}};r.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,s){var a=Object.keys(this._tweens);if(0===a.length)return!1;for(e=void 0!==e?e:m.now();a.length>0;){this._tweensAddedDuringUpdate={};for(var p=0;p<a.length;p++){var f=this._tweens[a[p]];f&&!1===f.update(e)&&(f._isPlaying=!1,s||delete this._tweens[a[p]])}a=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var e,m=new r;m.Group=r,m._nextId=0,m.nextId=function(){return m._nextId++},m.now="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},m.Tween=function(e,s){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=m.Easing.Linear.None,this._interpolationFunction=m.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=s||m,this._id=m.nextId()},m.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,s){return this._valuesEnd=Object.create(e),void 0!==s&&(this._duration=s),this},duration:function(s){return this._duration=s,this},start:function(e){for(var s in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?m.now()+parseFloat(e):e:m.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[s]instanceof Array){if(0===this._valuesEnd[s].length)continue;this._valuesEnd[s]=[this._object[s]].concat(this._valuesEnd[s])}void 0!==this._object[s]&&(this._valuesStart[s]=this._object[s],this._valuesStart[s]instanceof Array||(this._valuesStart[s]*=1),this._valuesStartRepeat[s]=this._valuesStart[s]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,s=this._chainedTweens.length;e<s;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onRepeat:function(s){return this._onRepeatCallback=s,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var s,a,p;if(e<this._startTime)return!0;for(s in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),a=(e-this._startTime)/this._duration,p=this._easingFunction(a=0===this._duration||a>1?1:a),this._valuesEnd)if(void 0!==this._valuesStart[s]){var f=this._valuesStart[s]||0,g=this._valuesEnd[s];g instanceof Array?this._object[s]=this._interpolationFunction(g,p):("string"==typeof g&&(g="+"===g.charAt(0)||"-"===g.charAt(0)?f+parseFloat(g):parseFloat(g)),"number"==typeof g&&(this._object[s]=f+(g-f)*p))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,a),1===a){if(this._repeat>0){for(s in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[s]&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo){var P=this._valuesStartRepeat[s];this._valuesStartRepeat[s]=this._valuesEnd[s],this._valuesEnd[s]=P}this._valuesStart[s]=this._valuesStartRepeat[s]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?e+this._repeatDelayTime:e+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var M=0,d=this._chainedTweens.length;M<d;M++)this._chainedTweens[M].start(this._startTime+this._duration);return!1}return!0}},m.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var s=1.70158;return e*e*((s+1)*e-s)},Out:function(e){var s=1.70158;return--e*e*((s+1)*e+s)+1},InOut:function(e){var s=2.5949095;return(e*=2)<1?e*e*((s+1)*e-s)*.5:.5*((e-=2)*e*((s+1)*e+s)+2)}},Bounce:{In:function(e){return 1-m.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*m.Easing.Bounce.In(2*e):.5*m.Easing.Bounce.Out(2*e-1)+.5}}},m.Interpolation={Linear:function(e,s){var a=e.length-1,p=a*s,f=Math.floor(p),g=m.Interpolation.Utils.Linear;return s<0?g(e[0],e[1],p):s>1?g(e[a],e[a-1],a-p):g(e[f],e[f+1>a?a:f+1],p-f)},Bezier:function(e,s){for(var a=0,p=e.length-1,f=Math.pow,g=m.Interpolation.Utils.Bernstein,P=0;P<=p;P++)a+=f(1-s,p-P)*f(s,P)*e[P]*g(p,P);return a},CatmullRom:function(e,s){var a=e.length-1,p=a*s,f=Math.floor(p),g=m.Interpolation.Utils.CatmullRom;return e[0]===e[a]?(s<0&&(f=Math.floor(p=a*(1+s))),g(e[(f-1+a)%a],e[f],e[(f+1)%a],e[(f+2)%a],p-f)):s<0?e[0]-(g(e[0],e[0],e[1],e[1],-p)-e[0]):s>1?e[a]-(g(e[a],e[a],e[a-1],e[a-1],p-a)-e[a]):g(e[f?f-1:0],e[f],e[a<f+1?a:f+1],e[a<f+2?a:f+2],p-f)},Utils:{Linear:function(e,s,a){return(s-e)*a+e},Bernstein:function(e,s){var a=m.Interpolation.Utils.Factorial;return a(e)/a(s)/a(e-s)},Factorial:(e=[1],function(s){var a=1;if(e[s])return e[s];for(var p=s;p>1;p--)a*=p;return e[s]=a,a}),CatmullRom:function(e,s,a,p,f){var g=.5*(a-e),P=.5*(p-s),M=f*f;return(2*s-2*a+g+P)*(f*M)+(-3*s+3*a-2*g-P)*M+g*f+s}}},void 0!==(c=function(){return m}.apply(V,[]))&&(q.exports=c)},4919:(q,V,b)=>{"use strict";b.d(V,{Lr:()=>D,Vw:()=>d});var c=b(655),r=b(5e3),m=b(9808),e=b(6553);const a=["header"],p=["container"],f=["content"],g=["invisiblePadding"];let d=class{constructor(t,i,l,n,u,o){this.element=t,this.renderer=i,this.zone=l,this.changeDetectorRef=n,this.window=window,this.executeRefreshOutsideAngularZone=!1,this._enableUnequalChildrenSizes=!1,this.RTL=!1,this.useMarginInsteadOfTranslate=!1,this.ssrViewportWidth=1920,this.ssrViewportHeight=1080,this._items=[],this.compareItems=(h,_)=>h===_,this.vsUpdate=new r.vpe,this.vsChange=new r.vpe,this.vsStart=new r.vpe,this.vsEnd=new r.vpe,this.calculatedScrollbarWidth=0,this.calculatedScrollbarHeight=0,this.padding=0,this.previousViewPort={},this.cachedPageSize=0,this.previousScrollNumberElements=0,this.isAngularUniversalSSR=(0,m.PM)(u),this.checkResizeInterval=o.checkResizeInterval,this.modifyOverflowStyleOfParentScroll=o.modifyOverflowStyleOfParentScroll,this.resizeBypassRefreshThreshold=o.resizeBypassRefreshThreshold,this.scrollAnimationTime=o.scrollAnimationTime,this.scrollDebounceTime=o.scrollDebounceTime,this.scrollThrottlingTime=o.scrollThrottlingTime,this.scrollbarHeight=o.scrollbarHeight,this.scrollbarWidth=o.scrollbarWidth,this.stripedTable=o.stripedTable,this.horizontal=!1,this.resetWrapGroupDimensions()}get viewPortInfo(){let t=this.previousViewPort||{};return{startIndex:t.startIndex||0,endIndex:t.endIndex||0,scrollStartPosition:t.scrollStartPosition||0,scrollEndPosition:t.scrollEndPosition||0,maxScrollPosition:t.maxScrollPosition||0,startIndexWithBuffer:t.startIndexWithBuffer||0,endIndexWithBuffer:t.endIndexWithBuffer||0}}get enableUnequalChildrenSizes(){return this._enableUnequalChildrenSizes}set enableUnequalChildrenSizes(t){this._enableUnequalChildrenSizes!==t&&(this._enableUnequalChildrenSizes=t,this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0)}get bufferAmount(){return"number"==typeof this._bufferAmount&&this._bufferAmount>=0?this._bufferAmount:this.enableUnequalChildrenSizes?5:0}set bufferAmount(t){this._bufferAmount=t}get scrollThrottlingTime(){return this._scrollThrottlingTime}set scrollThrottlingTime(t){this._scrollThrottlingTime=t,this.updateOnScrollFunction()}get scrollDebounceTime(){return this._scrollDebounceTime}set scrollDebounceTime(t){this._scrollDebounceTime=t,this.updateOnScrollFunction()}updateOnScrollFunction(){this.onScroll=this.scrollDebounceTime?this.debounce(()=>{this.refresh_internal(!1)},this.scrollDebounceTime):this.scrollThrottlingTime?this.throttleTrailing(()=>{this.refresh_internal(!1)},this.scrollThrottlingTime):()=>{this.refresh_internal(!1)}}get checkResizeInterval(){return this._checkResizeInterval}set checkResizeInterval(t){this._checkResizeInterval!==t&&(this._checkResizeInterval=t,this.addScrollEventHandlers())}get items(){return this._items}set items(t){t!==this._items&&(this._items=t||[],this.refresh_internal(!0))}get horizontal(){return this._horizontal}set horizontal(t){this._horizontal=t,this.updateDirection()}revertParentOverscroll(){const t=this.getScrollElement();t&&this.oldParentScrollOverflow&&(t.style["overflow-y"]=this.oldParentScrollOverflow.y,t.style["overflow-x"]=this.oldParentScrollOverflow.x),this.oldParentScrollOverflow=void 0}get parentScroll(){return this._parentScroll}set parentScroll(t){if(this._parentScroll===t)return;this.revertParentOverscroll(),this._parentScroll=t,this.addScrollEventHandlers();const i=this.getScrollElement();this.modifyOverflowStyleOfParentScroll&&i!==this.element.nativeElement&&(this.oldParentScrollOverflow={x:i.style["overflow-x"],y:i.style["overflow-y"]},i.style["overflow-y"]=this.horizontal?"visible":"auto",i.style["overflow-x"]=this.horizontal?"auto":"visible")}ngOnInit(){this.addScrollEventHandlers()}ngOnDestroy(){this.removeScrollEventHandlers(),this.revertParentOverscroll()}ngOnChanges(t){let i=this.cachedItemsLength!==this.items.length;this.cachedItemsLength=this.items.length,this.refresh_internal(i||!t.items||!t.items.previousValue||0===t.items.previousValue.length)}ngDoCheck(){if(this.cachedItemsLength!==this.items.length)return this.cachedItemsLength=this.items.length,void this.refresh_internal(!0);if(this.previousViewPort&&this.viewPortItems&&this.viewPortItems.length>0){let t=!1;for(let i=0;i<this.viewPortItems.length;++i)if(!this.compareItems(this.items[this.previousViewPort.startIndexWithBuffer+i],this.viewPortItems[i])){t=!0;break}t&&this.refresh_internal(!0)}}refresh(){this.refresh_internal(!0)}invalidateAllCachedMeasurements(){this.wrapGroupDimensions={maxChildSizePerWrapGroup:[],numberOfKnownWrapGroupChildSizes:0,sumOfKnownWrapGroupChildWidths:0,sumOfKnownWrapGroupChildHeights:0},this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0,this.refresh_internal(!1)}invalidateCachedMeasurementForItem(t){if(this.enableUnequalChildrenSizes){let i=this.items&&this.items.indexOf(t);i>=0&&this.invalidateCachedMeasurementAtIndex(i)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)}invalidateCachedMeasurementAtIndex(t){if(this.enableUnequalChildrenSizes){let i=this.wrapGroupDimensions.maxChildSizePerWrapGroup[t];i&&(this.wrapGroupDimensions.maxChildSizePerWrapGroup[t]=void 0,--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=i.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=i.childHeight||0)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)}scrollInto(t,i=!0,l=0,n,u){let o=this.items.indexOf(t);-1!==o&&this.scrollToIndex(o,i,l,n,u)}scrollToIndex(t,i=!0,l=0,n,u){let o=5,h=()=>{if(--o,o<=0)return void(u&&u());let _=this.calculateDimensions(),S=Math.min(Math.max(t,0),_.itemCount-1);this.previousViewPort.startIndex!==S?this.scrollToIndex_internal(t,i,l,0,h):u&&u()};this.scrollToIndex_internal(t,i,l,n,h)}scrollToIndex_internal(t,i=!0,l=0,n,u){n=void 0===n?this.scrollAnimationTime:n;let o=this.calculateDimensions(),h=this.calculatePadding(t,o)+l;i||(h-=o.wrapGroupsPerPage*o[this._childScrollDim]),this.scrollToPosition(h,n,u)}scrollToPosition(t,i,l){t+=this.getElementsOffset(),i=void 0===i?this.scrollAnimationTime:i;let u,n=this.getScrollElement();if(this.currentTween&&(this.currentTween.stop(),this.currentTween=void 0),!i)return this.renderer.setProperty(n,this._scrollType,t),void this.refresh_internal(!1,l);const o={scrollPosition:n[this._scrollType]};let h=new e.Tween(o).to({scrollPosition:t},i).easing(e.Easing.Quadratic.Out).onUpdate(S=>{isNaN(S.scrollPosition)||(this.renderer.setProperty(n,this._scrollType,S.scrollPosition),this.refresh_internal(!1))}).onStop(()=>{cancelAnimationFrame(u)}).start();const _=S=>{if(h.isPlaying()){if(h.update(S),o.scrollPosition===t)return void this.refresh_internal(!1,l);this.zone.runOutsideAngular(()=>{u=requestAnimationFrame(_)})}};_(),this.currentTween=h}getElementSize(t){let i=t.getBoundingClientRect(),l=getComputedStyle(t),n=parseInt(l["margin-top"],10)||0,u=parseInt(l["margin-bottom"],10)||0,o=parseInt(l["margin-left"],10)||0,h=parseInt(l["margin-right"],10)||0;return{top:i.top+n,bottom:i.bottom+u,left:i.left+o,right:i.right+h,width:i.width+o+h,height:i.height+n+u}}checkScrollElementResized(){let i,t=this.getElementSize(this.getScrollElement());if(this.previousScrollBoundingRect){let l=Math.abs(t.width-this.previousScrollBoundingRect.width),n=Math.abs(t.height-this.previousScrollBoundingRect.height);i=l>this.resizeBypassRefreshThreshold||n>this.resizeBypassRefreshThreshold}else i=!0;i&&(this.previousScrollBoundingRect=t,t.width>0&&t.height>0&&this.refresh_internal(!1))}updateDirection(){this.horizontal?(this._childScrollDim="childWidth",this._invisiblePaddingProperty="scaleX",this._marginDir="margin-left",this._offsetType="offsetLeft",this._pageOffsetType="pageXOffset",this._scrollType="scrollLeft",this._translateDir="translateX"):(this._childScrollDim="childHeight",this._invisiblePaddingProperty="scaleY",this._marginDir="margin-top",this._offsetType="offsetTop",this._pageOffsetType="pageYOffset",this._scrollType="scrollTop",this._translateDir="translateY")}debounce(t,i){const l=this.throttleTrailing(t,i),n=function(){l.cancel(),l.apply(this,arguments)};return n.cancel=function(){l.cancel()},n}throttleTrailing(t,i){let l,n=arguments;const u=function(){const o=this;n=arguments,!l&&(i<=0?t.apply(o,n):l=setTimeout(function(){l=void 0,t.apply(o,n)},i))};return u.cancel=function(){l&&(clearTimeout(l),l=void 0)},u}refresh_internal(t,i,l=2){if(t&&this.previousViewPort&&this.previousViewPort.scrollStartPosition>0){let n=this.previousViewPort,u=this.viewPortItems,o=i;i=()=>{let h=this.previousViewPort.scrollLength-n.scrollLength;if(h>0&&this.viewPortItems){let _=u[0],S=this.items.findIndex(v=>this.compareItems(_,v));if(S>this.previousViewPort.startIndexWithBuffer){let v=!1;for(let w=1;w<this.viewPortItems.length;++w)if(!this.compareItems(this.items[S+w],u[w])){v=!0;break}if(!v)return void this.scrollToPosition(this.previousViewPort.scrollStartPosition+h,0,o)}}o&&o()}}this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{t&&this.resetWrapGroupDimensions();let n=this.calculateViewport(),u=t||n.startIndex!==this.previousViewPort.startIndex,o=t||n.endIndex!==this.previousViewPort.endIndex,h=n.scrollLength!==this.previousViewPort.scrollLength,_=n.padding!==this.previousViewPort.padding,S=n.scrollStartPosition!==this.previousViewPort.scrollStartPosition||n.scrollEndPosition!==this.previousViewPort.scrollEndPosition||n.maxScrollPosition!==this.previousViewPort.maxScrollPosition;if(this.previousViewPort=n,h&&(this.renderer.setStyle(this.invisiblePaddingElementRef.nativeElement,"transform",`${this._invisiblePaddingProperty}(${n.scrollLength})`),this.renderer.setStyle(this.invisiblePaddingElementRef.nativeElement,"webkitTransform",`${this._invisiblePaddingProperty}(${n.scrollLength})`)),_&&(this.useMarginInsteadOfTranslate?this.renderer.setStyle(this.contentElementRef.nativeElement,this._marginDir,`${n.padding}px`):(this.renderer.setStyle(this.contentElementRef.nativeElement,"transform",`${this._translateDir}(${n.padding}px)`),this.renderer.setStyle(this.contentElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${n.padding}px)`))),this.headerElementRef){let w=this.getScrollElement()[this._scrollType],y=this.getElementsOffset(),W=Math.max(w-n.padding-y+this.headerElementRef.nativeElement.clientHeight,0);this.renderer.setStyle(this.headerElementRef.nativeElement,"transform",`${this._translateDir}(${W}px)`),this.renderer.setStyle(this.headerElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${W}px)`)}const v=u||o?{startIndex:n.startIndex,endIndex:n.endIndex,scrollStartPosition:n.scrollStartPosition,scrollEndPosition:n.scrollEndPosition,startIndexWithBuffer:n.startIndexWithBuffer,endIndexWithBuffer:n.endIndexWithBuffer,maxScrollPosition:n.maxScrollPosition}:void 0;if(u||o||S){const w=()=>{this.viewPortItems=n.startIndexWithBuffer>=0&&n.endIndexWithBuffer>=0?this.items.slice(n.startIndexWithBuffer,n.endIndexWithBuffer+1):[],this.vsUpdate.emit(this.viewPortItems),u&&this.vsStart.emit(v),o&&this.vsEnd.emit(v),(u||o)&&(this.changeDetectorRef.markForCheck(),this.vsChange.emit(v)),l>0?this.refresh_internal(!1,i,l-1):i&&i()};this.executeRefreshOutsideAngularZone?w():this.zone.run(w)}else{if(l>0&&(h||_))return void this.refresh_internal(!1,i,l-1);i&&i()}})})}getScrollElement(){return this.parentScroll instanceof Window?document.scrollingElement||document.documentElement||document.body:this.parentScroll||this.element.nativeElement}addScrollEventHandlers(){if(this.isAngularUniversalSSR)return;let t=this.getScrollElement();this.removeScrollEventHandlers(),this.zone.runOutsideAngular(()=>{this.parentScroll instanceof Window?(this.disposeScrollHandler=this.renderer.listen("window","scroll",this.onScroll),this.disposeResizeHandler=this.renderer.listen("window","resize",this.onScroll)):(this.disposeScrollHandler=this.renderer.listen(t,"scroll",this.onScroll),this._checkResizeInterval>0&&(this.checkScrollElementResizedTimer=setInterval(()=>{this.checkScrollElementResized()},this._checkResizeInterval)))})}removeScrollEventHandlers(){this.checkScrollElementResizedTimer&&clearInterval(this.checkScrollElementResizedTimer),this.disposeScrollHandler&&(this.disposeScrollHandler(),this.disposeScrollHandler=void 0),this.disposeResizeHandler&&(this.disposeResizeHandler(),this.disposeResizeHandler=void 0)}getElementsOffset(){if(this.isAngularUniversalSSR)return 0;let t=0;if(this.containerElementRef&&this.containerElementRef.nativeElement&&(t+=this.containerElementRef.nativeElement[this._offsetType]),this.parentScroll){let i=this.getScrollElement(),l=this.getElementSize(this.element.nativeElement),n=this.getElementSize(i);t+=this.horizontal?l.left-n.left:l.top-n.top,this.parentScroll instanceof Window||(t+=i[this._scrollType])}return t}countItemsPerWrapGroup(){if(this.isAngularUniversalSSR)return Math.round(this.horizontal?this.ssrViewportHeight/this.ssrChildHeight:this.ssrViewportWidth/this.ssrChildWidth);let t=this.horizontal?"offsetLeft":"offsetTop",i=(this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement).children,l=i?i.length:0;if(0===l)return 1;let n=i[0][t],u=1;for(;u<l&&n===i[u][t];)++u;return u}getScrollStartPosition(){let t;return this.parentScroll instanceof Window&&(t=window[this._pageOffsetType]),t||this.getScrollElement()[this._scrollType]||0}resetWrapGroupDimensions(){const t=this.wrapGroupDimensions;if(this.invalidateAllCachedMeasurements(),!this.enableUnequalChildrenSizes||!t||0===t.numberOfKnownWrapGroupChildSizes)return;const i=this.countItemsPerWrapGroup();for(let l=0;l<t.maxChildSizePerWrapGroup.length;++l){const n=t.maxChildSizePerWrapGroup[l];if(!n||!n.items||!n.items.length)continue;if(n.items.length!==i)return;let u=!1,o=i*l;for(let h=0;h<i;++h)if(!this.compareItems(n.items[h],this.items[o+h])){u=!0;break}u||(++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=n.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=n.childHeight||0,this.wrapGroupDimensions.maxChildSizePerWrapGroup[l]=n)}}calculateDimensions(){let t=this.getScrollElement();this.calculatedScrollbarHeight=Math.max(Math.min(t.offsetHeight-t.clientHeight,25),this.calculatedScrollbarHeight),this.calculatedScrollbarWidth=Math.max(Math.min(t.offsetWidth-t.clientWidth,25),this.calculatedScrollbarWidth);let h,_,S,l=t.offsetWidth-(this.scrollbarWidth||this.calculatedScrollbarWidth||(this.horizontal?0:25)),n=t.offsetHeight-(this.scrollbarHeight||this.calculatedScrollbarHeight||(this.horizontal?25:0)),u=this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement,o=this.countItemsPerWrapGroup();if(this.isAngularUniversalSSR){l=this.ssrViewportWidth,n=this.ssrViewportHeight,_=this.ssrChildWidth,S=this.ssrChildHeight;let C=Math.max(Math.ceil(l/_),1),I=Math.max(Math.ceil(n/S),1);h=this.horizontal?C:I}else if(this.enableUnequalChildrenSizes){let C=t[this._scrollType]-(this.previousViewPort?this.previousViewPort.padding:0),I=this.previousViewPort.startIndexWithBuffer||0,R=Math.ceil(I/o),E=0,G=0,H=0,A=0;h=0;for(let U=0;U<u.children.length;++U){++I;let K=this.getElementSize(u.children[U]);if(E=Math.max(E,K.width),G=Math.max(G,K.height),I%o==0){let F=this.wrapGroupDimensions.maxChildSizePerWrapGroup[R];F&&(--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=F.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=F.childHeight||0),++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;const Q=this.items.slice(I-o,I);if(this.wrapGroupDimensions.maxChildSizePerWrapGroup[R]={childWidth:E,childHeight:G,items:Q},this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=E,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=G,this.horizontal){let T=Math.min(E,Math.max(l-H,0));if(C>0){let L=Math.min(C,T);T-=L,C-=L}H+=T,T>0&&l>=H&&++h}else{let T=Math.min(G,Math.max(n-A,0));if(C>0){let L=Math.min(C,T);T-=L,C-=L}A+=T,T>0&&n>=A&&++h}++R,E=0,G=0}}let N=this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,Y=this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;_=this.childWidth||N||l,S=this.childHeight||Y||n,this.horizontal?l>H&&(h+=Math.ceil((l-H)/_)):n>A&&(h+=Math.ceil((n-A)/S))}else{if(u.children.length>0){(!this.childWidth||!this.childHeight)&&(!this.minMeasuredChildWidth&&l>0&&(this.minMeasuredChildWidth=l),!this.minMeasuredChildHeight&&n>0&&(this.minMeasuredChildHeight=n));let E=this.getElementSize(u.children[0]);this.minMeasuredChildWidth=Math.min(this.minMeasuredChildWidth,E.width),this.minMeasuredChildHeight=Math.min(this.minMeasuredChildHeight,E.height)}_=this.childWidth||this.minMeasuredChildWidth||l,S=this.childHeight||this.minMeasuredChildHeight||n;let C=Math.max(Math.ceil(l/_),1),I=Math.max(Math.ceil(n/S),1);h=this.horizontal?C:I}let v=this.items.length,w=o*h,y=v/w,W=Math.ceil(v/o),O=0,x=this.horizontal?_:S;if(this.enableUnequalChildrenSizes){let C=0;for(let I=0;I<W;++I){let R=this.wrapGroupDimensions.maxChildSizePerWrapGroup[I]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[I][this._childScrollDim];R?O+=R:++C}O+=Math.round(C*x)}else O=W*x;this.headerElementRef&&(O+=this.headerElementRef.nativeElement.clientHeight);let B=this.horizontal?l:n;return{childHeight:S,childWidth:_,itemCount:v,itemsPerPage:w,itemsPerWrapGroup:o,maxScrollPosition:Math.max(O-B,0),pageCount_fractional:y,scrollLength:O,viewportLength:B,wrapGroupsPerPage:h}}calculatePadding(t,i){if(0===i.itemCount)return 0;let l=i[this._childScrollDim],n=Math.floor(t/i.itemsPerWrapGroup)||0;if(!this.enableUnequalChildrenSizes)return l*n;let u=0,o=0;for(let h=0;h<n;++h){let _=this.wrapGroupDimensions.maxChildSizePerWrapGroup[h]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[h][this._childScrollDim];_?o+=_:++u}return o+=Math.round(u*l),o}calculatePageInfo(t,i){let l=0;if(this.enableUnequalChildrenSizes){const y=Math.ceil(i.itemCount/i.itemsPerWrapGroup);let W=0,O=i[this._childScrollDim];for(let x=0;x<y;++x){if(W+=this.wrapGroupDimensions.maxChildSizePerWrapGroup[x]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[x][this._childScrollDim]||O,t<W){l=x/y;break}}}else l=t/i.scrollLength;let n=Math.min(Math.max(l*i.pageCount_fractional,0),i.pageCount_fractional)*i.itemsPerPage,u=i.itemCount-i.itemsPerPage-1,o=Math.min(Math.floor(n),u);if(o-=o%i.itemsPerWrapGroup,this.stripedTable){let y=2*i.itemsPerWrapGroup;o%y!=0&&(o=Math.max(o-o%y,0))}let h=Math.ceil(n)+i.itemsPerPage-1,_=(h+1)%i.itemsPerWrapGroup;_>0&&(h+=i.itemsPerWrapGroup-_),isNaN(o)&&(o=0),isNaN(h)&&(h=0),o=Math.min(Math.max(o,0),i.itemCount-1),h=Math.min(Math.max(h,0),i.itemCount-1);let S=this.bufferAmount*i.itemsPerWrapGroup;return{startIndex:o,endIndex:h,startIndexWithBuffer:Math.min(Math.max(o-S,0),i.itemCount-1),endIndexWithBuffer:Math.min(Math.max(h+S,0),i.itemCount-1),scrollStartPosition:t,scrollEndPosition:t+i.viewportLength,maxScrollPosition:i.maxScrollPosition}}calculateViewport(){let t=this.calculateDimensions(),i=this.getElementsOffset(),l=this.getScrollStartPosition();l>t.scrollLength+i&&!(this.parentScroll instanceof Window)?l=t.scrollLength:l-=i,l=Math.max(0,l);let n=this.calculatePageInfo(l,t),u=this.calculatePadding(n.startIndexWithBuffer,t),o=t.scrollLength;return{startIndex:n.startIndex,endIndex:n.endIndex,startIndexWithBuffer:n.startIndexWithBuffer,endIndexWithBuffer:n.endIndexWithBuffer,padding:Math.round(u),scrollLength:Math.round(o),scrollStartPosition:n.scrollStartPosition,scrollEndPosition:n.scrollEndPosition,maxScrollPosition:n.maxScrollPosition}}};d.\u0275fac=function(t){return new(t||d)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.R0b),r.Y36(r.sBO),r.Y36(r.Lbi),r.Y36("virtual-scroller-default-options",8))},d.\u0275cmp=r.Xpm({type:d,selectors:[["virtual-scroller"],["","virtualScroller",""]],contentQueries:function(t,i,l){if(1&t&&(r.Suo(l,a,5,r.SBq),r.Suo(l,p,5,r.SBq)),2&t){let n;r.iGM(n=r.CRH())&&(i.headerElementRef=n.first),r.iGM(n=r.CRH())&&(i.containerElementRef=n.first)}},viewQuery:function(t,i){if(1&t&&(r.Gf(f,7,r.SBq),r.Gf(g,7,r.SBq)),2&t){let l;r.iGM(l=r.CRH())&&(i.contentElementRef=l.first),r.iGM(l=r.CRH())&&(i.invisiblePaddingElementRef=l.first)}},hostVars:8,hostBindings:function(t,i){2&t&&r.ekj("horizontal",i.horizontal)("vertical",!i.horizontal)("selfScroll",!i.parentScroll)("rtl",i.RTL)},inputs:{executeRefreshOutsideAngularZone:"executeRefreshOutsideAngularZone",RTL:"RTL",useMarginInsteadOfTranslate:"useMarginInsteadOfTranslate",ssrViewportWidth:"ssrViewportWidth",ssrViewportHeight:"ssrViewportHeight",compareItems:"compareItems",checkResizeInterval:"checkResizeInterval",modifyOverflowStyleOfParentScroll:"modifyOverflowStyleOfParentScroll",resizeBypassRefreshThreshold:"resizeBypassRefreshThreshold",scrollAnimationTime:"scrollAnimationTime",scrollDebounceTime:"scrollDebounceTime",scrollThrottlingTime:"scrollThrottlingTime",scrollbarHeight:"scrollbarHeight",scrollbarWidth:"scrollbarWidth",stripedTable:"stripedTable",horizontal:"horizontal",enableUnequalChildrenSizes:"enableUnequalChildrenSizes",bufferAmount:"bufferAmount",items:"items",parentScroll:"parentScroll",childWidth:"childWidth",childHeight:"childHeight",ssrChildWidth:"ssrChildWidth",ssrChildHeight:"ssrChildHeight"},outputs:{vsUpdate:"vsUpdate",vsChange:"vsChange",vsStart:"vsStart",vsEnd:"vsEnd"},exportAs:["virtualScroller"],features:[r.TTD],ngContentSelectors:["*"],decls:5,vars:0,consts:[[1,"total-padding"],["invisiblePadding",""],[1,"scrollable-content"],["content",""]],template:function(t,i){1&t&&(r.F$t(),r._UZ(0,"div",0,1),r.TgZ(2,"div",2,3),r.Hsn(4),r.qZA())},styles:["[_nghost-%COMP%] {\n      position: relative;\n\t  \tdisplay: block;\n      -webkit-overflow-scrolling: touch;\n    }\n\n\t\t.horizontal.selfScroll[_nghost-%COMP%] {\n      overflow-y: visible;\n      overflow-x: auto;\n\t\t}\n\n\t\t.horizontal.selfScroll.rtl[_nghost-%COMP%] {\n\t\t\ttransform: scaleX(-1);\n\t\t}\n\n\t\t.vertical.selfScroll[_nghost-%COMP%] {\n      overflow-y: auto;\n      overflow-x: visible;\n\t\t}\n\n    .scrollable-content[_ngcontent-%COMP%] {\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      max-width: 100vw;\n      max-height: 100vh;\n      position: absolute;\n    }\n\n\t\t.scrollable-content[_ngcontent-%COMP%]     > * {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\t.horizontal[_nghost-%COMP%] {\n\t\t\twhite-space: nowrap;\n\t\t}\n\n\t\t.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%] {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]     > * {\n\t\t\tflex-shrink: 0;\n\t\t\tflex-grow: 0;\n\t\t\twhite-space: initial;\n\t\t}\n\n\t\t.horizontal.rtl[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]     > * {\n\t\t\ttransform:scaleX(-1);\n\t\t}\n\n    .total-padding[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 1px;\n      width: 1px;\n      transform-origin: 0 0;\n      opacity: 0;\n    }\n\n    .horizontal[_nghost-%COMP%]   .total-padding[_ngcontent-%COMP%] {\n      height: 100%;\n    }"]}),d.ctorParameters=()=>[{type:r.SBq},{type:r.Qsj},{type:r.R0b},{type:r.sBO},{type:Object,decorators:[{type:r.tBr,args:[r.Lbi]}]},{type:void 0,decorators:[{type:r.FiY},{type:r.tBr,args:["virtual-scroller-default-options"]}]}],(0,c.gn)([(0,r.IIB)()],d.prototype,"executeRefreshOutsideAngularZone",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"enableUnequalChildrenSizes",null),(0,c.gn)([(0,r.IIB)()],d.prototype,"RTL",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"useMarginInsteadOfTranslate",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"modifyOverflowStyleOfParentScroll",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"stripedTable",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"scrollbarWidth",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"scrollbarHeight",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"childWidth",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"childHeight",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"ssrChildWidth",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"ssrChildHeight",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"ssrViewportWidth",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"ssrViewportHeight",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"bufferAmount",null),(0,c.gn)([(0,r.IIB)()],d.prototype,"scrollAnimationTime",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"resizeBypassRefreshThreshold",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"scrollThrottlingTime",null),(0,c.gn)([(0,r.IIB)()],d.prototype,"scrollDebounceTime",null),(0,c.gn)([(0,r.IIB)()],d.prototype,"checkResizeInterval",null),(0,c.gn)([(0,r.IIB)()],d.prototype,"items",null),(0,c.gn)([(0,r.IIB)()],d.prototype,"compareItems",void 0),(0,c.gn)([(0,r.IIB)()],d.prototype,"horizontal",null),(0,c.gn)([(0,r.IIB)()],d.prototype,"parentScroll",null),(0,c.gn)([(0,r.r_U)()],d.prototype,"vsUpdate",void 0),(0,c.gn)([(0,r.r_U)()],d.prototype,"vsChange",void 0),(0,c.gn)([(0,r.r_U)()],d.prototype,"vsStart",void 0),(0,c.gn)([(0,r.r_U)()],d.prototype,"vsEnd",void 0),(0,c.gn)([(0,r.i9L)("content",{read:r.SBq,static:!0})],d.prototype,"contentElementRef",void 0),(0,c.gn)([(0,r.i9L)("invisiblePadding",{read:r.SBq,static:!0})],d.prototype,"invisiblePaddingElementRef",void 0),(0,c.gn)([(0,r.aQ5)("header",{read:r.SBq,static:!1})],d.prototype,"headerElementRef",void 0),(0,c.gn)([(0,r.aQ5)("container",{read:r.SBq,static:!1})],d.prototype,"containerElementRef",void 0),d=(0,c.gn)([(0,c.fM)(4,(0,r.tBr)(r.Lbi)),(0,c.fM)(5,(0,r.FiY)()),(0,c.fM)(5,(0,r.tBr)("virtual-scroller-default-options"))],d);let D=class{};D.\u0275fac=function(t){return new(t||D)},D.\u0275mod=r.oAB({type:D}),D.\u0275inj=r.cJS({providers:[{provide:"virtual-scroller-default-options",useFactory:function M(){return{checkResizeInterval:1e3,modifyOverflowStyleOfParentScroll:!0,resizeBypassRefreshThreshold:5,scrollAnimationTime:750,scrollDebounceTime:0,scrollThrottlingTime:0,stripedTable:!1}}}],imports:[[m.ez]]})}}]);